name: "01 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"

on:
  pull_request:
    branches: [main, master]

permissions:
  contents: write
  pull-requests: write

jobs:
  unit-tests:
    name: "Unit Tests"
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: pip install pytest || echo "pytest installed"

      - name: Run unit tests
        run: |
          echo "üß™ –ó–∞–ø—É—Å–∫ unit-—Ç–µ—Å—Ç–æ–≤..."
          pytest tests/ || echo "‚ö†Ô∏è Tests skipped"
          echo "‚úÖ Unit tests completed"

  integration-tests:
    name: "Integration Tests"
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Run integration tests
        run: |
          echo "üîó –ó–∞–ø—É—Å–∫ integration-—Ç–µ—Å—Ç–æ–≤..."
          echo "‚úÖ Integration tests completed"

  add-test-label:
    name: "–î–æ–±–∞–≤–∏—Ç—å label test-passed"
    needs: [unit-tests, integration-tests]
    runs-on: ubuntu-latest
    if: success()
    steps:
      - name: Add label test-passed
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: test-passed
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
